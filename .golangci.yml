version: "2"

run:
  tests: true
  timeout: 5m

linters:
  # Enable specific linters
  # https://golangci-lint.run/usage/linters/#enabled-by-default
  enable:
    - copyloopvar # Detect copy loops
    - errcheck # Detect unchecked errors
    - govet # Reports suspicious constructs
    - ineffassign # Detect unused assignments
    - staticcheck # Go static analysis
    - unused # Detect unused constants, variables, functions and types

    # Additional recommended linters
    - gocritic # A more opinionated linter
    - gosec # Security checker
    - misspell # Find commonly misspelled words
#    - revive # a metalinter with more checks
    - maintidx
    - bodyclose # Check HTTP response bodies are closed
    - goconst # Find repeated strings that could be constants
    - gocyclo # Check function complexity
    - gocognit # Check cognitive complexity
    - whitespace # Check trailing whitespace
    - thelper # Detect test helpers not using t.Helper()
    - usetesting # Detect incorrect usage of testing package
    - tparallel # Detect incorrect usage of t.Parallel()

  settings:
    # Skip generated files.
    # Default: true
    skip-generated: false
    # Enable custom order of sections.
    # If `true`, make the section order the same as the order of `sections`.
    # Default: false
    custom-order: true
    # Drops lexical ordering for custom sections.
    # Default: false
    no-lex-order: true

    gocritic:
      enabled-tags:
        - diagnostic
        - style
        - performance
      disabled-checks:
        - dupSubExpr
        - paramTypeCombine
        - dupImport
        - hugeParam
        - rangeValCopy
        - ptrToRefParam

  gocyclo:
    min-complexity: 15
  gocognit:
    min-complexity: 20
  dupl:
    threshold: 100
  goconst:
    min-len: 3
    min-occurrences: 3
  revive:
    rules:
      # https://github.com/mgechev/revive/blob/master/RULES_DESCRIPTIONS.md#var-naming
      - name: var-naming
        severity: warning
        disabled: true



issues:
  exclude-use-default: false
  max-issues-per-linter: 0
  max-same-issues: 0

formatters:
  enable:
    - gci
    - gofumpt
  settings:
    gci:
      # Section configuration to compare against.
      # Section names are case-insensitive and may contain parameters in ().
      # The default order of sections is `standard > default > custom > blank > dot > alias > localmodule`,
      # If `custom-order` is `true`, it follows the order of `sections` option.
      # Default: ["standard", "default"]
      sections:
        - standard # Standard section: captures all standard packages.
        - default # Default section: contains all imports that could not be matched to another section type.
        - prefix(github.com/cosmos/cosmos-sdk) # Custom section: groups all imports with the specified Prefix.
        - prefix(github.com/cosmos/ibc-go)
        - blank # Blank section: contains all blank imports. This section is not present unless explicitly enabled.
        - dot # Dot section: contains all dot imports. This section is not present unless explicitly enabled.
        - alias # Alias section: contains all alias imports. This section is not present unless explicitly enabled.
        - localmodule # Local module section: contains all local packages. This section is not present unless explicitly enabled.
      # Enable custom order of sections.
      # If `true`, make the section order the same as the order of `sections`.
      # Default: false
      custom-order: true
      # Drops lexical ordering for custom sections.
      # Default: false
      no-lex-order: true
  exclusions:
    # Skip generated files.
    generated: lax
    paths:
      - third_party$
      - builtin$
      - examples$
